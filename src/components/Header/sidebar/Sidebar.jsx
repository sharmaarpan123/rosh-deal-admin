import React from "react";
import styles from "./Sidebar.module.scss";
import { Link, NavLink, useLocation } from "react-router-dom";

// img
import logo from "../../../Assets/images/logo.png";
import { Accordion, Button } from "react-bootstrap";

import { useSelector } from "react-redux";
import { ADMIN_ROLE_TYPE_ENUM } from "../../../utilities/const";
import {
  adminItems,
  subAdminItems,
  superAdminItems,
  adminSubAdminItems,
} from "./Routes";

const Sidebar = ({ sidebar, setSidebar }) => {
  const location = useLocation();
  const pageActive = location.pathname;
  const handleSidebar = () => {
    setSidebar(!sidebar);
  };

  const { admin } = useSelector((s) => s.login);

  const navItems = admin?.roles?.includes(ADMIN_ROLE_TYPE_ENUM.SUPERADMIN)
    ? superAdminItems
    : admin?.roles?.includes(ADMIN_ROLE_TYPE_ENUM.ADMIN) &&
      admin?.roles?.includes(ADMIN_ROLE_TYPE_ENUM.SUBADMIN)
    ? adminSubAdminItems
    : admin?.roles?.includes(ADMIN_ROLE_TYPE_ENUM.ADMIN)
    ? adminItems
    : admin?.roles?.includes(ADMIN_ROLE_TYPE_ENUM.SUBADMIN)
    ? subAdminItems
    : [];

  return (
    <div
      className={`${styles.sidebar} ${
        sidebar && styles.active
      } pt-4 position-fixed`}
    >
      <Button
        onClick={handleSidebar}
        variant="transparent"
        className="position-absolute border-0 p-2 closeBtn d-lg-none"
        style={{ top: 0, right: 0 }}
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="15"
          height="21"
          viewBox="0 0 15 21"
          fill="none"
        >
          <path
            d="M7.245 6.529L10.668 1.3H14.259V1.447L9.303 8.608L14.343 15.895V16H10.71L7.245 10.834L3.78 16H0.147V15.895L5.145 8.608L0.21 1.447V1.3H3.801L7.245 6.529Z"
            fill="white"
          />
        </svg>
      </Button>
      <div className={`${styles.top} top text-center px-3 py-2 rounded`}>
        <div className={`${styles.logo}`}>
          <Link to="/">
            <img
              src={logo}
              alt=""
              className="w-100  object-fit-contain rounded"
            />
          </Link>
        </div>
      </div>
      <Accordion className={`${styles.linkWrpper} linkWrpper pt-2 px-2`}>
        <ul className="list-unstyled ps-0 mb-0">
          {navItems.map(
            ({ path, name, icon: Icon, IsSubItems, subItems }, ind) => {
              if (IsSubItems) {
                return (
                  <li className={`py-1 ${styles.accordionWrp} `}>
                    <Accordion.Item
                      eventKey={ind}
                      className={`${styles?.accordionBtn}`}
                    >
                      <Accordion.Header>{name}</Accordion.Header>
                      {subItems?.map(({ path, name, icon: Icon }) => {
                        return (
                          <Accordion.Body>
                            <NavLink
                              to={path}
                              className={`${styles.link} ${
                                pageActive.includes(path) && styles.active
                              } d-flex align-items-center gap-10 text-white`}
                            >
                              <Icon styles={styles} />
                              {name}
                            </NavLink>
                          </Accordion.Body>
                        );
                      })}
                    </Accordion.Item>
                  </li>
                );
              }
              return (
                <li key={path} className="my-1">
                  <NavLink
                    to={path}
                    className={`${styles.link} ${
                      pageActive.includes(path) && styles.active
                    } d-flex align-items-center gap-10 text-white`}
                  >
                    <Icon styles={styles} />
                    {name}
                  </NavLink>
                </li>
              );
            }
          )}

          {/*  some extra nav can be beneficial in future */}

          {/* <li className="py-1">
            <NavLink
              to="/earnings"
              className={`${styles.link} ${
                pageActive.includes("/earnings") && styles.active
              } d-flex align-items-center gap-10 text-white`}
            >
              <span className={`${styles.icn} ${styles.stroke} icn me-1`}>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="15"
                  height="15"
                  viewBox="0 0 18 19"
                  fill="none"
                >
                  <path
                    d="M1.72266 10.7959C2.70316 11.2526 3.98918 11.5043 5.34375 11.5043C5.74137 11.5043 6.13301 11.4825 6.51199 11.44C7.03828 9.63224 8.34328 8.15251 10.0375 7.38927C9.76149 7.11575 9.39621 6.86895 8.94902 6.65872C8.6727 6.52864 8.37141 6.41509 8.05078 6.31946V7.35587C8.05078 8.2281 7.34098 8.9379 6.46875 8.9379H4.21875C3.34652 8.9379 2.63672 8.2281 2.63672 7.35587V6.31665C2.31047 6.41298 2.00391 6.52688 1.72266 6.65802C0.611719 7.17552 0 7.91028 0 8.72696C0 9.54364 0.611719 10.2784 1.72266 10.7959Z"
                    fill="white"
                  />
                  <path
                    d="M1.72266 13.6084C2.70316 14.0654 3.98918 14.3168 5.34375 14.3168C5.68266 14.3168 6.01699 14.301 6.34289 14.2704C6.28699 13.9308 6.25781 13.5824 6.25781 13.227C6.25781 12.9879 6.27082 12.752 6.29684 12.52C5.98395 12.546 5.66508 12.559 5.34375 12.559C3.83836 12.559 2.39414 12.2725 1.27723 11.7521C0.775547 11.5184 0.347695 11.242 0 10.9277V11.5395C0 12.3561 0.611719 13.0909 1.72266 13.6084Z"
                    fill="white"
                  />
                  <path
                    d="M5.34375 15.3715C3.83836 15.3715 2.39449 15.085 1.27723 14.5646C0.775547 14.3309 0.347695 14.0545 0 13.7402V14.352C0 15.1686 0.611719 15.9034 1.72266 16.4209C2.70316 16.8779 3.98918 17.1293 5.34375 17.1293C6.07324 17.1293 6.78164 17.0562 7.43168 16.917C7.08363 16.4255 6.80273 15.883 6.60375 15.3029C6.19312 15.3483 5.7709 15.3715 5.34375 15.3715Z"
                    fill="white"
                  />
                  <path
                    d="M12.6562 7.8833C9.7098 7.8833 7.3125 10.2806 7.3125 13.2271C7.3125 16.1735 9.7098 18.5708 12.6562 18.5708C15.6027 18.5708 18 16.1735 18 13.2271C18 10.2806 15.6027 7.8833 12.6562 7.8833ZM14.1936 14.2969C14.0977 14.8681 13.7015 15.322 13.182 15.5092C13.1653 15.7854 12.9366 16.0044 12.6562 16.0044C12.3967 16.0044 12.1814 15.8167 12.1376 15.5697C11.8913 15.5278 11.6673 15.4369 11.3836 15.2513C11.14 15.0917 11.0714 14.7651 11.231 14.5212C11.3903 14.2775 11.7172 14.2093 11.9609 14.3686C12.2179 14.537 12.3005 14.5496 12.6527 14.5475C12.992 14.5454 13.127 14.2789 13.1534 14.1221C13.1773 13.9812 13.1505 13.7938 12.8893 13.7013C12.4513 13.5466 12.0023 13.3691 11.6842 13.1195C11.346 12.854 11.1902 12.3988 11.2785 11.9315C11.3691 11.4512 11.6943 11.0648 12.1341 10.9071C12.1684 10.649 12.3888 10.4497 12.6562 10.4497C12.9424 10.4497 13.1748 10.6777 13.1828 10.9619C13.2975 11.0042 13.4072 11.0539 13.5083 11.1065C13.8123 11.2648 13.8826 11.6687 13.6504 11.9207C13.4866 12.0984 13.2214 12.1414 13.0118 12.0211C12.8474 11.9267 12.6527 11.8497 12.5012 11.8954C12.361 11.9376 12.323 12.0835 12.3149 12.127C12.2977 12.2181 12.3223 12.2793 12.3353 12.2895C12.5343 12.4456 12.9045 12.5883 13.2406 12.7068C13.9296 12.9504 14.3125 13.5895 14.1936 14.2969Z"
                    fill="white"
                  />
                  <path
                    d="M2.8125 5.03564H3.69141V7.35596C3.69141 7.64705 3.92766 7.8833 4.21875 7.8833H6.46875C6.75985 7.8833 6.9961 7.64705 6.9961 7.35596V5.03564H7.875C8.07434 5.03564 8.25645 4.9235 8.3461 4.74525C8.43575 4.56736 8.41711 4.35396 8.29828 4.194L5.76703 0.783848C5.66754 0.649902 5.51075 0.570801 5.34375 0.570801C5.17676 0.570801 5.01996 0.649902 4.92047 0.783848L2.38922 4.194C2.27039 4.35396 2.25176 4.56736 2.34141 4.74525C2.43106 4.9235 2.61317 5.03564 2.8125 5.03564Z"
                    fill="white"
                  />
                </svg>
              </span>
              Earnings
            </NavLink>
          </li>  */}
          {/* <li className="py-1">
            <NavLink
              to="/accounting"
              className={`${styles.link} ${
                pageActive.includes("/accounting") && styles.active
              } d-flex align-items-center gap-10 text-white`}
            >
              <span className={`${styles.icn} ${styles.stroke} icn me-1`}>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="15"
                  height="15"
                  viewBox="0 0 19 18"
                  fill="none"
                >
                  <path
                    d="M6.68028 13.2107C6.46169 13.1399 6.30741 12.9406 6.30741 12.6899C6.30741 12.4456 6.46813 12.2335 6.69311 12.1628C6.75099 11.5649 6.886 10.9992 7.08528 10.4592C7.01454 10.4913 6.94383 10.5042 6.86669 10.5042C6.55814 10.5042 6.30741 10.2535 6.30741 9.95136C6.30741 9.63637 6.55814 9.39208 6.86669 9.39208C7.11742 9.39208 7.32314 9.55279 7.39384 9.77778C8.46097 7.74636 10.576 6.35134 13.0124 6.35134C13.231 6.35134 13.4431 6.36421 13.6553 6.38351V2.83493C13.6553 1.42707 12.511 0.276367 11.0967 0.276367H2.63668C1.22883 0.276367 0.078125 1.42707 0.078125 2.83493V13.5256C0.078125 14.9399 1.22883 16.0906 2.63668 16.0906H7.59956C7.08528 15.2421 6.75742 14.2649 6.68028 13.2171V13.2107ZM3.74885 4.95635H9.99097C10.3445 4.95635 10.6338 5.23921 10.6338 5.5992C10.6338 5.95277 10.3445 6.24206 9.99097 6.24206H3.74885C3.38885 6.24206 3.106 5.95277 3.106 5.5992C3.106 5.23921 3.38885 4.95635 3.74885 4.95635ZM3.74885 13.2492C3.44026 13.2492 3.18957 12.9985 3.18957 12.6899C3.18957 12.3813 3.44026 12.1307 3.74885 12.1307C4.05098 12.1307 4.30814 12.3813 4.30814 12.6899C4.30814 12.9985 4.05098 13.2492 3.74885 13.2492ZM3.74885 10.5042C3.44026 10.5042 3.18957 10.2535 3.18957 9.95136C3.18957 9.63637 3.44026 9.39208 3.74885 9.39208C4.05741 9.39208 4.30814 9.63637 4.30814 9.95136C4.30814 10.2535 4.05741 10.5042 3.74885 10.5042Z"
                    fill="white"
                  />
                  <path
                    d="M13.0124 7.63721C10.2224 7.63721 7.95312 9.93221 7.95312 12.7544C7.95312 15.5701 10.2224 17.8651 13.0124 17.8651C15.8088 17.8651 18.0781 15.5701 18.0781 12.7544C18.0781 9.93221 15.8088 7.63721 13.0124 7.63721ZM13.0124 12.1115C13.996 12.1115 14.7996 12.9215 14.7996 13.9179C14.7996 14.6958 14.311 15.3515 13.636 15.6087C13.5846 15.9108 13.3338 16.1487 13.0124 16.1487C12.6974 16.1487 12.4467 15.9108 12.3953 15.6087C11.7138 15.3515 11.2317 14.6958 11.2317 13.9179C11.2317 13.5644 11.521 13.2751 11.8745 13.2751C12.2281 13.2751 12.5174 13.5644 12.5174 13.9179C12.5174 14.2072 12.7424 14.4451 13.0124 14.4451C13.2888 14.4451 13.5139 14.2072 13.5139 13.9179C13.5139 13.6286 13.2888 13.3972 13.0124 13.3972C12.0289 13.3972 11.2317 12.5808 11.2317 11.5844C11.2317 10.8065 11.7138 10.1508 12.3953 9.89364C12.4467 9.59152 12.6974 9.3601 13.0124 9.3601C13.3338 9.3601 13.5846 9.59152 13.636 9.89364C14.311 10.1508 14.7996 10.8065 14.7996 11.5844C14.7996 11.9379 14.5103 12.2272 14.1567 12.2272C13.7967 12.2272 13.5139 11.9379 13.5139 11.5844C13.5139 11.2951 13.2888 11.0636 13.0124 11.0636C12.7424 11.0636 12.5174 11.2951 12.5174 11.5844C12.5174 11.8737 12.7424 12.1115 13.0124 12.1115Z"
                    fill="white"
                  />
                </svg>
              </span>
              Accounting
            </NavLink>
          </li>   */}

          {/* <li className="py-1">
            <NavLink
              to="/help"
              className={`${styles.link} ${
                pageActive.includes("/help") && styles.active
              } d-flex align-items-center gap-10 text-white`}
            >
              <span className={`${styles.icn} ${styles.stroke} icn me-1`}>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="15"
                  height="15"
                  viewBox="0 0 19 19"
                  fill="none"
                >
                  <path
                    d="M9.70508 0.11084C4.73079 0.11084 0.705078 4.13609 0.705078 9.11084C0.705078 14.0851 4.73033 18.1108 9.70508 18.1108C14.6794 18.1108 18.7051 14.0856 18.7051 9.11084C18.7051 4.13655 14.6798 0.11084 9.70508 0.11084ZM9.43877 13.3232C8.92936 13.3232 8.53842 12.8967 8.53842 12.411C8.53842 11.9134 8.9412 11.4988 9.43877 11.4988C9.93637 11.4988 10.3509 11.9135 10.3509 12.411C10.3509 12.8967 9.94815 13.3232 9.43877 13.3232ZM10.7893 8.71484C10.1377 9.22425 10.1258 9.57965 10.1258 10.1957C10.1258 10.4208 10.0074 10.6814 9.42689 10.6814C8.94113 10.6814 8.77534 10.5037 8.77534 9.88769C8.77534 8.86886 9.22551 8.38314 9.56906 8.08698C9.96 7.75525 10.6234 7.38804 10.6234 6.74834C10.6234 6.20335 10.1496 5.94273 9.55721 5.94273C8.34886 5.94273 8.6095 6.85497 7.96973 6.85497C7.64988 6.85497 7.25894 6.64168 7.25894 6.17969C7.25894 5.53998 7.99343 4.59221 9.59275 4.59221C11.1091 4.59221 12.1161 5.43336 12.1161 6.54693C12.1161 7.6605 11.1091 8.46607 10.7893 8.71484Z"
                    fill="white"
                  />
                </svg>
              </span>
              Help
            </NavLink>
          </li> */}

          {/* <li className="py-1">
            <NavLink
              to="/settings"
              className={`${styles.link} ${
                pageActive.includes("/settings") && styles.active
              } d-flex align-items-center gap-10 text-white`}
            >
              <span className={`${styles.icn} ${styles.stroke} icn me-1`}>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="15"
                  height="15"
                  viewBox="0 0 18 18"
                  fill="none"
                >
                  <path
                    d="M17.6004 6.49643L15.5357 5.98867C15.4116 5.59727 15.2519 5.21773 15.0593 4.85467C15.3693 4.33864 16.0208 3.25256 16.0208 3.25256C16.1454 3.04504 16.1125 2.77929 15.9415 2.60832L14.4501 1.11693C14.2791 0.945434 14.0139 0.912492 13.8059 1.03761L12.2012 1.9991C11.8401 1.80803 11.4627 1.64993 11.0739 1.52685L10.5661 -0.537844C10.5074 -0.772687 10.2967 -0.9375 10.0547 -0.9375H7.94531C7.70326 -0.9375 7.49211 -0.772688 7.43393 -0.537879C7.43393 -0.537879 7.08219 0.903176 6.92666 1.52632C6.5121 1.65763 6.11146 1.8281 5.72984 2.03616L4.06593 1.03761C3.85787 0.914004 3.59318 0.945961 3.42169 1.11693L1.93029 2.60832C1.75932 2.77929 1.72635 3.04504 1.85098 3.25256L2.87993 4.97107C2.7141 5.29809 2.57505 5.63848 2.46435 5.98712L0.399656 6.49643C0.164813 6.55514 0 6.76576 0 7.00781V9.11719C0 9.35924 0.164812 9.57039 0.399621 9.62857L2.46484 10.1363C2.59 10.5334 2.7527 10.9191 2.94996 11.2894L2.02918 12.824C1.90455 13.0316 1.93753 13.2973 2.1085 13.4683L3.59989 14.9597C3.77037 15.1301 4.03608 15.1625 4.24413 15.039C4.24413 15.039 5.27667 14.42 5.78239 14.1171C6.14855 14.3123 6.53168 14.4735 6.9267 14.5986L7.43396 16.6628C7.49211 16.8977 7.70326 17.0625 7.94531 17.0625H10.0547C10.2967 17.0625 10.5074 16.8977 10.5661 16.6629L11.0733 14.5987C11.4797 14.4699 11.871 14.3036 12.2434 14.1017C12.763 14.4133 13.8058 15.039 13.8058 15.039C14.0134 15.1631 14.2791 15.1312 14.4501 14.9597L15.9415 13.4683C16.1124 13.2973 16.1454 13.0316 16.0208 12.824L15.0727 11.2446C15.2596 10.8897 15.4146 10.5184 15.5357 10.1363L17.6003 9.62857C17.8352 9.56986 18 9.35924 18 9.11719V7.00781C18 6.76576 17.8352 6.55514 17.6004 6.49643ZM9 11.7539C6.96477 11.7539 5.30859 10.0977 5.30859 8.0625C5.30859 6.02727 6.96477 4.37109 9 4.37109C11.0352 4.37109 12.6914 6.02727 12.6914 8.0625C12.6914 10.0977 11.0352 11.7539 9 11.7539Z"
                    fill="white"
                  />
                </svg>
              </span>
              Settings
            </NavLink>
          </li>  */}
        </ul>
      </Accordion>
    </div>
  );
};

export default Sidebar;
